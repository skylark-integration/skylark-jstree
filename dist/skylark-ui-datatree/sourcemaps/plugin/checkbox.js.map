{"version":3,"sources":["plugin/checkbox.js"],"names":["define","langx","browser","eventer","noder","geom","velm","$","jstree","plugins","checkbox","_i","document","createElement","className","setAttribute","defaults","visible","three_state","whole_node","keep_selected_style","cascade","tie_selection","cascade_to_disabled","cascade_to_hidden","options","parent","this","bind","call","_data","uto","selected","settings","element","on","proxy","addClass","indexOf","clearTimeout","setTimeout","_undetermined","e","data","i","j","m","_model","dpc","nodes","length","state","checked","original","push","c","k","l","tmp","p","chd","s","t","concat","children_d","children","vakata","array_unique","id","root","get_node","attr","obj","node","par","sel","cur","selectedIds","_cascade_new_checked_state","temp","hasOwnProperty","undetermined","allIds","filter","parents","removeClass","is_multi","old_par","old_parent","new_par","array_remove_item","get_undetermined","full","o","tt","r","undefined","find","not","each","tmp2","loaded","redraw_node","deep","is_callback","force_render","apply","arguments","icon","childNodes","cloneNode","checkbox_disabled","insertBefore","show_checkboxes","core","themes","checkboxes","get_container_ul","hide_checkboxes","toggle_checkboxes","is_undetermined","d","inArray","disable_checkbox","t1","t2","dom","isArray","slice","trigger","enable_checkbox","activate_node","target","hasClass","ctrlKey","is_disabled","is_checked","uncheck_node","check_node","checkedState","selectedChildIds","self","selectedNodeIds","selectedChildrenIds","disabled","hidden","get_checked_descendants","childId","_id","select_node","event","deselect_node","check_all","select_all","redraw","uncheck_all","deselect_all","is_selected","get_checked","get_selected","map","get_top_checked","get_top_selected","get_bottom_checked","get_bottom_selected","load_node","callback","get_state","set_state","res","_this","v","refresh","skip_loading","forget_state"],"mappings":"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","file":"../../plugin/checkbox.js","sourcesContent":["define([\n  \"skylark-utils/langx\",\n  \"skylark-utils/browser\",\n  \"skylark-utils/eventer\",\n  \"skylark-utils/noder\",\n  \"skylark-utils/geom\",\n  \"skylark-utils/velm\",\n  \"skylark-utils/query\",\n  \"../tree\"\n],function(langx,browser,eventer,noder,geom,velm,$,jstree){\n\t\"use strict\";\n\n\tif($.jstree.plugins.checkbox) { return; }\n\n\tvar _i = document.createElement('I');\n\t_i.className = 'jstree-icon jstree-checkbox';\n\t_i.setAttribute('role', 'presentation');\n\t/**\n\t * stores all defaults for the checkbox plugin\n\t * @name $.jstree.defaults.checkbox\n\t * @plugin checkbox\n\t */\n\t$.jstree.defaults.checkbox = {\n\t\t/**\n\t\t * a boolean indicating if checkboxes should be visible (can be changed at a later time using `show_checkboxes()` and `hide_checkboxes`). Defaults to `true`.\n\t\t * @name $.jstree.defaults.checkbox.visible\n\t\t * @plugin checkbox\n\t\t */\n\t\tvisible\t\t\t\t: true,\n\t\t/**\n\t\t * a boolean indicating if checkboxes should cascade down and have an undetermined state. Defaults to `true`.\n\t\t * @name $.jstree.defaults.checkbox.three_state\n\t\t * @plugin checkbox\n\t\t */\n\t\tthree_state\t\t\t: true,\n\t\t/**\n\t\t * a boolean indicating if clicking anywhere on the node should act as clicking on the checkbox. Defaults to `true`.\n\t\t * @name $.jstree.defaults.checkbox.whole_node\n\t\t * @plugin checkbox\n\t\t */\n\t\twhole_node\t\t\t: true,\n\t\t/**\n\t\t * a boolean indicating if the selected style of a node should be kept, or removed. Defaults to `true`.\n\t\t * @name $.jstree.defaults.checkbox.keep_selected_style\n\t\t * @plugin checkbox\n\t\t */\n\t\tkeep_selected_style\t: true,\n\t\t/**\n\t\t * This setting controls how cascading and undetermined nodes are applied.\n\t\t * If 'up' is in the string - cascading up is enabled, if 'down' is in the string - cascading down is enabled, if 'undetermined' is in the string - undetermined nodes will be used.\n\t\t * If `three_state` is set to `true` this setting is automatically set to 'up+down+undetermined'. Defaults to ''.\n\t\t * @name $.jstree.defaults.checkbox.cascade\n\t\t * @plugin checkbox\n\t\t */\n\t\tcascade\t\t\t\t: '',\n\t\t/**\n\t\t * This setting controls if checkbox are bound to the general tree selection or to an internal array maintained by the checkbox plugin. Defaults to `true`, only set to `false` if you know exactly what you are doing.\n\t\t * @name $.jstree.defaults.checkbox.tie_selection\n\t\t * @plugin checkbox\n\t\t */\n\t\ttie_selection\t\t: true,\n\n\t\t/**\n\t\t * This setting controls if cascading down affects disabled checkboxes\n\t\t * @name $.jstree.defaults.checkbox.cascade_to_disabled\n\t\t * @plugin checkbox\n\t\t */\n\t\tcascade_to_disabled : true,\n\n\t\t/**\n\t\t * This setting controls if cascading down affects hidden checkboxes\n\t\t * @name $.jstree.defaults.checkbox.cascade_to_hidden\n\t\t * @plugin checkbox\n\t\t */\n\t\tcascade_to_hidden : true\n\t};\n\t$.jstree.plugins.checkbox = function (options, parent) {\n\t\tthis.bind = function () {\n\t\t\tparent.bind.call(this);\n\t\t\tthis._data.checkbox.uto = false;\n\t\t\tthis._data.checkbox.selected = [];\n\t\t\tif(this.settings.checkbox.three_state) {\n\t\t\t\tthis.settings.checkbox.cascade = 'up+down+undetermined';\n\t\t\t}\n\t\t\tthis.element\n\t\t\t\t.on(\"init.jstree\", $.proxy(function () {\n\t\t\t\t\t\tthis._data.checkbox.visible = this.settings.checkbox.visible;\n\t\t\t\t\t\tif(!this.settings.checkbox.keep_selected_style) {\n\t\t\t\t\t\t\tthis.element.addClass('jstree-checkbox-no-clicked');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(this.settings.checkbox.tie_selection) {\n\t\t\t\t\t\t\tthis.element.addClass('jstree-checkbox-selection');\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this))\n\t\t\t\t.on(\"loading.jstree\", $.proxy(function () {\n\t\t\t\t\t\tthis[ this._data.checkbox.visible ? 'show_checkboxes' : 'hide_checkboxes' ]();\n\t\t\t\t\t}, this));\n\t\t\tif(this.settings.checkbox.cascade.indexOf('undetermined') !== -1) {\n\t\t\t\tthis.element\n\t\t\t\t\t.on('changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree', $.proxy(function () {\n\t\t\t\t\t\t\t// only if undetermined is in setting\n\t\t\t\t\t\t\tif(this._data.checkbox.uto) { clearTimeout(this._data.checkbox.uto); }\n\t\t\t\t\t\t\tthis._data.checkbox.uto = setTimeout($.proxy(this._undetermined, this), 50);\n\t\t\t\t\t\t}, this));\n\t\t\t}\n\t\t\tif(!this.settings.checkbox.tie_selection) {\n\t\t\t\tthis.element\n\t\t\t\t\t.on('model.jstree', $.proxy(function (e, data) {\n\t\t\t\t\t\tvar m = this._model.data,\n\t\t\t\t\t\t\tp = m[data.parent],\n\t\t\t\t\t\t\tdpc = data.nodes,\n\t\t\t\t\t\t\ti, j;\n\t\t\t\t\t\tfor(i = 0, j = dpc.length; i < j; i++) {\n\t\t\t\t\t\t\tm[dpc[i]].state.checked = m[dpc[i]].state.checked || (m[dpc[i]].original && m[dpc[i]].original.state && m[dpc[i]].original.state.checked);\n\t\t\t\t\t\t\tif(m[dpc[i]].state.checked) {\n\t\t\t\t\t\t\t\tthis._data.checkbox.selected.push(dpc[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this));\n\t\t\t}\n\t\t\tif(this.settings.checkbox.cascade.indexOf('up') !== -1 || this.settings.checkbox.cascade.indexOf('down') !== -1) {\n\t\t\t\tthis.element\n\t\t\t\t\t.on('model.jstree', $.proxy(function (e, data) {\n\t\t\t\t\t\t\tvar m = this._model.data,\n\t\t\t\t\t\t\t\tp = m[data.parent],\n\t\t\t\t\t\t\t\tdpc = data.nodes,\n\t\t\t\t\t\t\t\tchd = [],\n\t\t\t\t\t\t\t\tc, i, j, k, l, tmp, s = this.settings.checkbox.cascade, t = this.settings.checkbox.tie_selection;\n\n\t\t\t\t\t\t\tif(s.indexOf('down') !== -1) {\n\t\t\t\t\t\t\t\t// apply down\n\t\t\t\t\t\t\t\tif(p.state[ t ? 'selected' : 'checked' ]) {\n\t\t\t\t\t\t\t\t\tfor(i = 0, j = dpc.length; i < j; i++) {\n\t\t\t\t\t\t\t\t\t\tm[dpc[i]].state[ t ? 'selected' : 'checked' ] = true;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tthis._data[ t ? 'core' : 'checkbox' ].selected = this._data[ t ? 'core' : 'checkbox' ].selected.concat(dpc);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tfor(i = 0, j = dpc.length; i < j; i++) {\n\t\t\t\t\t\t\t\t\t\tif(m[dpc[i]].state[ t ? 'selected' : 'checked' ]) {\n\t\t\t\t\t\t\t\t\t\t\tfor(k = 0, l = m[dpc[i]].children_d.length; k < l; k++) {\n\t\t\t\t\t\t\t\t\t\t\t\tm[m[dpc[i]].children_d[k]].state[ t ? 'selected' : 'checked' ] = true;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tthis._data[ t ? 'core' : 'checkbox' ].selected = this._data[ t ? 'core' : 'checkbox' ].selected.concat(m[dpc[i]].children_d);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif(s.indexOf('up') !== -1) {\n\t\t\t\t\t\t\t\t// apply up\n\t\t\t\t\t\t\t\tfor(i = 0, j = p.children_d.length; i < j; i++) {\n\t\t\t\t\t\t\t\t\tif(!m[p.children_d[i]].children.length) {\n\t\t\t\t\t\t\t\t\t\tchd.push(m[p.children_d[i]].parent);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchd = $.vakata.array_unique(chd);\n\t\t\t\t\t\t\t\tfor(k = 0, l = chd.length; k < l; k++) {\n\t\t\t\t\t\t\t\t\tp = m[chd[k]];\n\t\t\t\t\t\t\t\t\twhile(p && p.id !== $.jstree.root) {\n\t\t\t\t\t\t\t\t\t\tc = 0;\n\t\t\t\t\t\t\t\t\t\tfor(i = 0, j = p.children.length; i < j; i++) {\n\t\t\t\t\t\t\t\t\t\t\tc += m[p.children[i]].state[ t ? 'selected' : 'checked' ];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif(c === j) {\n\t\t\t\t\t\t\t\t\t\t\tp.state[ t ? 'selected' : 'checked' ] = true;\n\t\t\t\t\t\t\t\t\t\t\tthis._data[ t ? 'core' : 'checkbox' ].selected.push(p.id);\n\t\t\t\t\t\t\t\t\t\t\ttmp = this.get_node(p, true);\n\t\t\t\t\t\t\t\t\t\t\tif(tmp && tmp.length) {\n\t\t\t\t\t\t\t\t\t\t\t\ttmp.attr('aria-selected', true).children('.jstree-anchor').addClass( t ? 'jstree-clicked' : 'jstree-checked');\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tp = this.get_node(p.parent);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis._data[ t ? 'core' : 'checkbox' ].selected = $.vakata.array_unique(this._data[ t ? 'core' : 'checkbox' ].selected);\n\t\t\t\t\t\t}, this))\n\t\t\t\t\t.on(this.settings.checkbox.tie_selection ? 'select_node.jstree' : 'check_node.jstree', $.proxy(function (e, data) {\n\t\t\t\t\t\t\tvar self = this,\n\t\t\t\t\t\t\t\tobj = data.node,\n\t\t\t\t\t\t\t\tm = this._model.data,\n\t\t\t\t\t\t\t\tpar = this.get_node(obj.parent),\n\t\t\t\t\t\t\t\ti, j, c, tmp, s = this.settings.checkbox.cascade, t = this.settings.checkbox.tie_selection,\n\t\t\t\t\t\t\t\tsel = {}, cur = this._data[ t ? 'core' : 'checkbox' ].selected;\n\n\t\t\t\t\t\t\tfor (i = 0, j = cur.length; i < j; i++) {\n\t\t\t\t\t\t\t\tsel[cur[i]] = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// apply down\n\t\t\t\t\t\t\tif(s.indexOf('down') !== -1) {\n\t\t\t\t\t\t\t\t//this._data[ t ? 'core' : 'checkbox' ].selected = $.vakata.array_unique(this._data[ t ? 'core' : 'checkbox' ].selected.concat(obj.children_d));\n\t\t\t\t\t\t\t\tvar selectedIds = this._cascade_new_checked_state(obj.id, true);\n\t\t\t\t\t\t\t\tvar temp = obj.children_d.concat(obj.id);\n\t\t\t\t\t\t\t\tfor (i = 0, j = temp.length; i < j; i++) {\n\t\t\t\t\t\t\t\t\tif (selectedIds.indexOf(temp[i]) > -1) {\n\t\t\t\t\t\t\t\t\t\tsel[temp[i]] = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tdelete sel[temp[i]];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// apply up\n\t\t\t\t\t\t\tif(s.indexOf('up') !== -1) {\n\t\t\t\t\t\t\t\twhile(par && par.id !== $.jstree.root) {\n\t\t\t\t\t\t\t\t\tc = 0;\n\t\t\t\t\t\t\t\t\tfor(i = 0, j = par.children.length; i < j; i++) {\n\t\t\t\t\t\t\t\t\t\tc += m[par.children[i]].state[ t ? 'selected' : 'checked' ];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif(c === j) {\n\t\t\t\t\t\t\t\t\t\tpar.state[ t ? 'selected' : 'checked' ] = true;\n\t\t\t\t\t\t\t\t\t\tsel[par.id] = true;\n\t\t\t\t\t\t\t\t\t\t//this._data[ t ? 'core' : 'checkbox' ].selected.push(par.id);\n\t\t\t\t\t\t\t\t\t\ttmp = this.get_node(par, true);\n\t\t\t\t\t\t\t\t\t\tif(tmp && tmp.length) {\n\t\t\t\t\t\t\t\t\t\t\ttmp.attr('aria-selected', true).children('.jstree-anchor').addClass(t ? 'jstree-clicked' : 'jstree-checked');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tpar = this.get_node(par.parent);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcur = [];\n\t\t\t\t\t\t\tfor (i in sel) {\n\t\t\t\t\t\t\t\tif (sel.hasOwnProperty(i)) {\n\t\t\t\t\t\t\t\t\tcur.push(i);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis._data[ t ? 'core' : 'checkbox' ].selected = cur;\n\t\t\t\t\t\t}, this))\n\t\t\t\t\t.on(this.settings.checkbox.tie_selection ? 'deselect_all.jstree' : 'uncheck_all.jstree', $.proxy(function (e, data) {\n\t\t\t\t\t\t\tvar obj = this.get_node($.jstree.root),\n\t\t\t\t\t\t\t\tm = this._model.data,\n\t\t\t\t\t\t\t\ti, j, tmp;\n\t\t\t\t\t\t\tfor(i = 0, j = obj.children_d.length; i < j; i++) {\n\t\t\t\t\t\t\t\ttmp = m[obj.children_d[i]];\n\t\t\t\t\t\t\t\tif(tmp && tmp.original && tmp.original.state && tmp.original.state.undetermined) {\n\t\t\t\t\t\t\t\t\ttmp.original.state.undetermined = false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, this))\n\t\t\t\t\t.on(this.settings.checkbox.tie_selection ? 'deselect_node.jstree' : 'uncheck_node.jstree', $.proxy(function (e, data) {\n\t\t\t\t\t\t\tvar self = this,\n\t\t\t\t\t\t\t\tobj = data.node,\n\t\t\t\t\t\t\t\tdom = this.get_node(obj, true),\n\t\t\t\t\t\t\t\ti, j, tmp, s = this.settings.checkbox.cascade, t = this.settings.checkbox.tie_selection,\n\t\t\t\t\t\t\t\tcur = this._data[ t ? 'core' : 'checkbox' ].selected, sel = {},\n\t\t\t\t\t\t\t\tstillSelectedIds = [],\n\t\t\t\t\t\t\t\tallIds = obj.children_d.concat(obj.id);\n\n\t\t\t\t\t\t\t// apply down\n\t\t\t\t\t\t\tif(s.indexOf('down') !== -1) {\n\t\t\t\t\t\t\t\tvar selectedIds = this._cascade_new_checked_state(obj.id, false);\n\n\t\t\t\t\t\t\t\tcur = cur.filter(function(id) {\n\t\t\t\t\t\t\t\t\treturn allIds.indexOf(id) === -1 || selectedIds.indexOf(id) > -1;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// only apply up if cascade up is enabled and if this node is not selected\n\t\t\t\t\t\t\t// (if all child nodes are disabled and cascade_to_disabled === false then this node will till be selected).\n\t\t\t\t\t\t\tif(s.indexOf('up') !== -1 && cur.indexOf(obj.id) === -1) {\n\t\t\t\t\t\t\t\tfor(i = 0, j = obj.parents.length; i < j; i++) {\n\t\t\t\t\t\t\t\t\ttmp = this._model.data[obj.parents[i]];\n\t\t\t\t\t\t\t\t\ttmp.state[ t ? 'selected' : 'checked' ] = false;\n\t\t\t\t\t\t\t\t\tif(tmp && tmp.original && tmp.original.state && tmp.original.state.undetermined) {\n\t\t\t\t\t\t\t\t\t\ttmp.original.state.undetermined = false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttmp = this.get_node(obj.parents[i], true);\n\t\t\t\t\t\t\t\t\tif(tmp && tmp.length) {\n\t\t\t\t\t\t\t\t\t\ttmp.attr('aria-selected', false).children('.jstree-anchor').removeClass(t ? 'jstree-clicked' : 'jstree-checked');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tcur = cur.filter(function(id) {\n\t\t\t\t\t\t\t\t\treturn obj.parents.indexOf(id) === -1;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis._data[ t ? 'core' : 'checkbox' ].selected = cur;\n\t\t\t\t\t\t}, this));\n\t\t\t}\n\t\t\tif(this.settings.checkbox.cascade.indexOf('up') !== -1) {\n\t\t\t\tthis.element\n\t\t\t\t\t.on('delete_node.jstree', $.proxy(function (e, data) {\n\t\t\t\t\t\t\t// apply up (whole handler)\n\t\t\t\t\t\t\tvar p = this.get_node(data.parent),\n\t\t\t\t\t\t\t\tm = this._model.data,\n\t\t\t\t\t\t\t\ti, j, c, tmp, t = this.settings.checkbox.tie_selection;\n\t\t\t\t\t\t\twhile(p && p.id !== $.jstree.root && !p.state[ t ? 'selected' : 'checked' ]) {\n\t\t\t\t\t\t\t\tc = 0;\n\t\t\t\t\t\t\t\tfor(i = 0, j = p.children.length; i < j; i++) {\n\t\t\t\t\t\t\t\t\tc += m[p.children[i]].state[ t ? 'selected' : 'checked' ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(j > 0 && c === j) {\n\t\t\t\t\t\t\t\t\tp.state[ t ? 'selected' : 'checked' ] = true;\n\t\t\t\t\t\t\t\t\tthis._data[ t ? 'core' : 'checkbox' ].selected.push(p.id);\n\t\t\t\t\t\t\t\t\ttmp = this.get_node(p, true);\n\t\t\t\t\t\t\t\t\tif(tmp && tmp.length) {\n\t\t\t\t\t\t\t\t\t\ttmp.attr('aria-selected', true).children('.jstree-anchor').addClass(t ? 'jstree-clicked' : 'jstree-checked');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tp = this.get_node(p.parent);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, this))\n\t\t\t\t\t.on('move_node.jstree', $.proxy(function (e, data) {\n\t\t\t\t\t\t\t// apply up (whole handler)\n\t\t\t\t\t\t\tvar is_multi = data.is_multi,\n\t\t\t\t\t\t\t\told_par = data.old_parent,\n\t\t\t\t\t\t\t\tnew_par = this.get_node(data.parent),\n\t\t\t\t\t\t\t\tm = this._model.data,\n\t\t\t\t\t\t\t\tp, c, i, j, tmp, t = this.settings.checkbox.tie_selection;\n\t\t\t\t\t\t\tif(!is_multi) {\n\t\t\t\t\t\t\t\tp = this.get_node(old_par);\n\t\t\t\t\t\t\t\twhile(p && p.id !== $.jstree.root && !p.state[ t ? 'selected' : 'checked' ]) {\n\t\t\t\t\t\t\t\t\tc = 0;\n\t\t\t\t\t\t\t\t\tfor(i = 0, j = p.children.length; i < j; i++) {\n\t\t\t\t\t\t\t\t\t\tc += m[p.children[i]].state[ t ? 'selected' : 'checked' ];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif(j > 0 && c === j) {\n\t\t\t\t\t\t\t\t\t\tp.state[ t ? 'selected' : 'checked' ] = true;\n\t\t\t\t\t\t\t\t\t\tthis._data[ t ? 'core' : 'checkbox' ].selected.push(p.id);\n\t\t\t\t\t\t\t\t\t\ttmp = this.get_node(p, true);\n\t\t\t\t\t\t\t\t\t\tif(tmp && tmp.length) {\n\t\t\t\t\t\t\t\t\t\t\ttmp.attr('aria-selected', true).children('.jstree-anchor').addClass(t ? 'jstree-clicked' : 'jstree-checked');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tp = this.get_node(p.parent);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tp = new_par;\n\t\t\t\t\t\t\twhile(p && p.id !== $.jstree.root) {\n\t\t\t\t\t\t\t\tc = 0;\n\t\t\t\t\t\t\t\tfor(i = 0, j = p.children.length; i < j; i++) {\n\t\t\t\t\t\t\t\t\tc += m[p.children[i]].state[ t ? 'selected' : 'checked' ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(c === j) {\n\t\t\t\t\t\t\t\t\tif(!p.state[ t ? 'selected' : 'checked' ]) {\n\t\t\t\t\t\t\t\t\t\tp.state[ t ? 'selected' : 'checked' ] = true;\n\t\t\t\t\t\t\t\t\t\tthis._data[ t ? 'core' : 'checkbox' ].selected.push(p.id);\n\t\t\t\t\t\t\t\t\t\ttmp = this.get_node(p, true);\n\t\t\t\t\t\t\t\t\t\tif(tmp && tmp.length) {\n\t\t\t\t\t\t\t\t\t\t\ttmp.attr('aria-selected', true).children('.jstree-anchor').addClass(t ? 'jstree-clicked' : 'jstree-checked');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tif(p.state[ t ? 'selected' : 'checked' ]) {\n\t\t\t\t\t\t\t\t\t\tp.state[ t ? 'selected' : 'checked' ] = false;\n\t\t\t\t\t\t\t\t\t\tthis._data[ t ? 'core' : 'checkbox' ].selected = $.vakata.array_remove_item(this._data[ t ? 'core' : 'checkbox' ].selected, p.id);\n\t\t\t\t\t\t\t\t\t\ttmp = this.get_node(p, true);\n\t\t\t\t\t\t\t\t\t\tif(tmp && tmp.length) {\n\t\t\t\t\t\t\t\t\t\t\ttmp.attr('aria-selected', false).children('.jstree-anchor').removeClass(t ? 'jstree-clicked' : 'jstree-checked');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tp = this.get_node(p.parent);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, this));\n\t\t\t}\n\t\t};\n\t\t/**\n\t\t * get an array of all nodes whose state is \"undetermined\"\n\t\t * @name get_undetermined([full])\n\t\t * @param  {boolean} full: if set to `true` the returned array will consist of the full node objects, otherwise - only IDs will be returned\n\t\t * @return {Array}\n\t\t * @plugin checkbox\n\t\t */\n\t\tthis.get_undetermined = function (full) {\n\t\t\tif (this.settings.checkbox.cascade.indexOf('undetermined') === -1) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tvar i, j, k, l, o = {}, m = this._model.data, t = this.settings.checkbox.tie_selection, s = this._data[ t ? 'core' : 'checkbox' ].selected, p = [], tt = this, r = [];\n\t\t\tfor(i = 0, j = s.length; i < j; i++) {\n\t\t\t\tif(m[s[i]] && m[s[i]].parents) {\n\t\t\t\t\tfor(k = 0, l = m[s[i]].parents.length; k < l; k++) {\n\t\t\t\t\t\tif(o[m[s[i]].parents[k]] !== undefined) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(m[s[i]].parents[k] !== $.jstree.root) {\n\t\t\t\t\t\t\to[m[s[i]].parents[k]] = true;\n\t\t\t\t\t\t\tp.push(m[s[i]].parents[k]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// attempt for server side undetermined state\n\t\t\tthis.element.find('.jstree-closed').not(':has(.jstree-children)')\n\t\t\t\t.each(function () {\n\t\t\t\t\tvar tmp = tt.get_node(this), tmp2;\n\t\t\t\t\t\n\t\t\t\t\tif(!tmp) { return; }\n\t\t\t\t\t\n\t\t\t\t\tif(!tmp.state.loaded) {\n\t\t\t\t\t\tif(tmp.original && tmp.original.state && tmp.original.state.undetermined && tmp.original.state.undetermined === true) {\n\t\t\t\t\t\t\tif(o[tmp.id] === undefined && tmp.id !== $.jstree.root) {\n\t\t\t\t\t\t\t\to[tmp.id] = true;\n\t\t\t\t\t\t\t\tp.push(tmp.id);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfor(k = 0, l = tmp.parents.length; k < l; k++) {\n\t\t\t\t\t\t\t\tif(o[tmp.parents[k]] === undefined && tmp.parents[k] !== $.jstree.root) {\n\t\t\t\t\t\t\t\t\to[tmp.parents[k]] = true;\n\t\t\t\t\t\t\t\t\tp.push(tmp.parents[k]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tfor(i = 0, j = tmp.children_d.length; i < j; i++) {\n\t\t\t\t\t\t\ttmp2 = m[tmp.children_d[i]];\n\t\t\t\t\t\t\tif(!tmp2.state.loaded && tmp2.original && tmp2.original.state && tmp2.original.state.undetermined && tmp2.original.state.undetermined === true) {\n\t\t\t\t\t\t\t\tif(o[tmp2.id] === undefined && tmp2.id !== $.jstree.root) {\n\t\t\t\t\t\t\t\t\to[tmp2.id] = true;\n\t\t\t\t\t\t\t\t\tp.push(tmp2.id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tfor(k = 0, l = tmp2.parents.length; k < l; k++) {\n\t\t\t\t\t\t\t\t\tif(o[tmp2.parents[k]] === undefined && tmp2.parents[k] !== $.jstree.root) {\n\t\t\t\t\t\t\t\t\t\to[tmp2.parents[k]] = true;\n\t\t\t\t\t\t\t\t\t\tp.push(tmp2.parents[k]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tfor (i = 0, j = p.length; i < j; i++) {\n\t\t\t\tif(!m[p[i]].state[ t ? 'selected' : 'checked' ]) {\n\t\t\t\t\tr.push(full ? m[p[i]] : p[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn r;\n\t\t};\n\t\t/**\n\t\t * set the undetermined state where and if necessary. Used internally.\n\t\t * @private\n\t\t * @name _undetermined()\n\t\t * @plugin checkbox\n\t\t */\n\t\tthis._undetermined = function () {\n\t\t\tif(this.element === null) { return; }\n\t\t\tvar p = this.get_undetermined(false), i, j, s;\n\n\t\t\tthis.element.find('.jstree-undetermined').removeClass('jstree-undetermined');\n\t\t\tfor (i = 0, j = p.length; i < j; i++) {\n\t\t\t\ts = this.get_node(p[i], true);\n\t\t\t\tif(s && s.length) {\n\t\t\t\t\ts.children('.jstree-anchor').children('.jstree-checkbox').addClass('jstree-undetermined');\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tthis.redraw_node = function(obj, deep, is_callback, force_render) {\n\t\t\tobj = parent.redraw_node.apply(this, arguments);\n\t\t\tif(obj) {\n\t\t\t\tvar i, j, tmp = null, icon = null;\n\t\t\t\tfor(i = 0, j = obj.childNodes.length; i < j; i++) {\n\t\t\t\t\tif(obj.childNodes[i] && obj.childNodes[i].className && obj.childNodes[i].className.indexOf(\"jstree-anchor\") !== -1) {\n\t\t\t\t\t\ttmp = obj.childNodes[i];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(tmp) {\n\t\t\t\t\tif(!this.settings.checkbox.tie_selection && this._model.data[obj.id].state.checked) { tmp.className += ' jstree-checked'; }\n\t\t\t\t\ticon = _i.cloneNode(false);\n\t\t\t\t\tif(this._model.data[obj.id].state.checkbox_disabled) { icon.className += ' jstree-checkbox-disabled'; }\n\t\t\t\t\ttmp.insertBefore(icon, tmp.childNodes[0]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!is_callback && this.settings.checkbox.cascade.indexOf('undetermined') !== -1) {\n\t\t\t\tif(this._data.checkbox.uto) { clearTimeout(this._data.checkbox.uto); }\n\t\t\t\tthis._data.checkbox.uto = setTimeout($.proxy(this._undetermined, this), 50);\n\t\t\t}\n\t\t\treturn obj;\n\t\t};\n\t\t/**\n\t\t * show the node checkbox icons\n\t\t * @name show_checkboxes()\n\t\t * @plugin checkbox\n\t\t */\n\t\tthis.show_checkboxes = function () { this._data.core.themes.checkboxes = true; this.get_container_ul().removeClass(\"jstree-no-checkboxes\"); };\n\t\t/**\n\t\t * hide the node checkbox icons\n\t\t * @name hide_checkboxes()\n\t\t * @plugin checkbox\n\t\t */\n\t\tthis.hide_checkboxes = function () { this._data.core.themes.checkboxes = false; this.get_container_ul().addClass(\"jstree-no-checkboxes\"); };\n\t\t/**\n\t\t * toggle the node icons\n\t\t * @name toggle_checkboxes()\n\t\t * @plugin checkbox\n\t\t */\n\t\tthis.toggle_checkboxes = function () { if(this._data.core.themes.checkboxes) { this.hide_checkboxes(); } else { this.show_checkboxes(); } };\n\t\t/**\n\t\t * checks if a node is in an undetermined state\n\t\t * @name is_undetermined(obj)\n\t\t * @param  {mixed} obj\n\t\t * @return {Boolean}\n\t\t */\n\t\tthis.is_undetermined = function (obj) {\n\t\t\tobj = this.get_node(obj);\n\t\t\tvar s = this.settings.checkbox.cascade, i, j, t = this.settings.checkbox.tie_selection, d = this._data[ t ? 'core' : 'checkbox' ].selected, m = this._model.data;\n\t\t\tif(!obj || obj.state[ t ? 'selected' : 'checked' ] === true || s.indexOf('undetermined') === -1 || (s.indexOf('down') === -1 && s.indexOf('up') === -1)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(!obj.state.loaded && obj.original.state.undetermined === true) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tfor(i = 0, j = obj.children_d.length; i < j; i++) {\n\t\t\t\tif($.inArray(obj.children_d[i], d) !== -1 || (!m[obj.children_d[i]].state.loaded && m[obj.children_d[i]].original.state.undetermined)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\t/**\n\t\t * disable a node's checkbox\n\t\t * @name disable_checkbox(obj)\n\t\t * @param {mixed} obj an array can be used too\n\t\t * @trigger disable_checkbox.jstree\n\t\t * @plugin checkbox\n\t\t */\n\t\tthis.disable_checkbox = function (obj) {\n\t\t\tvar t1, t2, dom;\n\t\t\tif($.isArray(obj)) {\n\t\t\t\tobj = obj.slice();\n\t\t\t\tfor(t1 = 0, t2 = obj.length; t1 < t2; t1++) {\n\t\t\t\t\tthis.disable_checkbox(obj[t1]);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tobj = this.get_node(obj);\n\t\t\tif(!obj || obj.id === $.jstree.root) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tdom = this.get_node(obj, true);\n\t\t\tif(!obj.state.checkbox_disabled) {\n\t\t\t\tobj.state.checkbox_disabled = true;\n\t\t\t\tif(dom && dom.length) {\n\t\t\t\t\tdom.children('.jstree-anchor').children('.jstree-checkbox').addClass('jstree-checkbox-disabled');\n\t\t\t\t}\n\t\t\t\t/**\n\t\t\t\t * triggered when an node's checkbox is disabled\n\t\t\t\t * @event\n\t\t\t\t * @name disable_checkbox.jstree\n\t\t\t\t * @param {Object} node\n\t\t\t\t * @plugin checkbox\n\t\t\t\t */\n\t\t\t\tthis.trigger('disable_checkbox', { 'node' : obj });\n\t\t\t}\n\t\t};\n\t\t/**\n\t\t * enable a node's checkbox\n\t\t * @name disable_checkbox(obj)\n\t\t * @param {mixed} obj an array can be used too\n\t\t * @trigger enable_checkbox.jstree\n\t\t * @plugin checkbox\n\t\t */\n\t\tthis.enable_checkbox = function (obj) {\n\t\t\tvar t1, t2, dom;\n\t\t\tif($.isArray(obj)) {\n\t\t\t\tobj = obj.slice();\n\t\t\t\tfor(t1 = 0, t2 = obj.length; t1 < t2; t1++) {\n\t\t\t\t\tthis.enable_checkbox(obj[t1]);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tobj = this.get_node(obj);\n\t\t\tif(!obj || obj.id === $.jstree.root) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tdom = this.get_node(obj, true);\n\t\t\tif(obj.state.checkbox_disabled) {\n\t\t\t\tobj.state.checkbox_disabled = false;\n\t\t\t\tif(dom && dom.length) {\n\t\t\t\t\tdom.children('.jstree-anchor').children('.jstree-checkbox').removeClass('jstree-checkbox-disabled');\n\t\t\t\t}\n\t\t\t\t/**\n\t\t\t\t * triggered when an node's checkbox is enabled\n\t\t\t\t * @event\n\t\t\t\t * @name enable_checkbox.jstree\n\t\t\t\t * @param {Object} node\n\t\t\t\t * @plugin checkbox\n\t\t\t\t */\n\t\t\t\tthis.trigger('enable_checkbox', { 'node' : obj });\n\t\t\t}\n\t\t};\n\n\t\tthis.activate_node = function (obj, e) {\n\t\t\tif($(e.target).hasClass('jstree-checkbox-disabled')) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(this.settings.checkbox.tie_selection && (this.settings.checkbox.whole_node || $(e.target).hasClass('jstree-checkbox'))) {\n\t\t\t\te.ctrlKey = true;\n\t\t\t}\n\t\t\tif(this.settings.checkbox.tie_selection || (!this.settings.checkbox.whole_node && !$(e.target).hasClass('jstree-checkbox'))) {\n\t\t\t\treturn parent.activate_node.call(this, obj, e);\n\t\t\t}\n\t\t\tif(this.is_disabled(obj)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(this.is_checked(obj)) {\n\t\t\t\tthis.uncheck_node(obj, e);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.check_node(obj, e);\n\t\t\t}\n\t\t\tthis.trigger('activate_node', { 'node' : this.get_node(obj) });\n\t\t};\n\n\t\t/**\n\t\t * Cascades checked state to a node and all its descendants. This function does NOT affect hidden and disabled nodes (or their descendants).\n\t\t * However if these unaffected nodes are already selected their ids will be included in the returned array.\n\t\t * @private\n\t\t * @param {string} id the node ID\n\t\t * @param {bool} checkedState should the nodes be checked or not\n\t\t * @returns {Array} Array of all node id's (in this tree branch) that are checked.\n\t\t */\n\t\tthis._cascade_new_checked_state = function (id, checkedState) {\n\t\t\tvar self = this;\n\t\t\tvar t = this.settings.checkbox.tie_selection;\n\t\t\tvar node = this._model.data[id];\n\t\t\tvar selectedNodeIds = [];\n\t\t\tvar selectedChildrenIds = [], i, j, selectedChildIds;\n\n\t\t\tif (\n\t\t\t\t(this.settings.checkbox.cascade_to_disabled || !node.state.disabled) &&\n\t\t\t\t(this.settings.checkbox.cascade_to_hidden || !node.state.hidden)\n\t\t\t) {\n\t\t\t\t//First try and check/uncheck the children\n\t\t\t\tif (node.children) {\n\t\t\t\t\tfor (i = 0, j = node.children.length; i < j; i++) {\n\t\t\t\t\t\tvar childId = node.children[i];\n\t\t\t\t\t\tselectedChildIds = self._cascade_new_checked_state(childId, checkedState);\n\t\t\t\t\t\tselectedNodeIds = selectedNodeIds.concat(selectedChildIds);\n\t\t\t\t\t\tif (selectedChildIds.indexOf(childId) > -1) {\n\t\t\t\t\t\t\tselectedChildrenIds.push(childId);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar dom = self.get_node(node, true);\n\n\t\t\t\t//A node's state is undetermined if some but not all of it's children are checked/selected .\n\t\t\t\tvar undetermined = selectedChildrenIds.length > 0 && selectedChildrenIds.length < node.children.length;\n\n\t\t\t\tif(node.original && node.original.state && node.original.state.undetermined) {\n\t\t\t\t\tnode.original.state.undetermined = undetermined;\n\t\t\t\t}\n\n\t\t\t\t//If a node is undetermined then remove selected class\n\t\t\t\tif (undetermined) {\n\t\t\t\t\tnode.state[ t ? 'selected' : 'checked' ] = false;\n\t\t\t\t\tdom.attr('aria-selected', false).children('.jstree-anchor').removeClass(t ? 'jstree-clicked' : 'jstree-checked');\n\t\t\t\t}\n\t\t\t\t//Otherwise, if the checkedState === true (i.e. the node is being checked now) and all of the node's children are checked (if it has any children),\n\t\t\t\t//check the node and style it correctly.\n\t\t\t\telse if (checkedState && selectedChildrenIds.length === node.children.length) {\n\t\t\t\t\tnode.state[ t ? 'selected' : 'checked' ] = checkedState;\n\t\t\t\t\tselectedNodeIds.push(node.id);\n\n\t\t\t\t\tdom.attr('aria-selected', true).children('.jstree-anchor').addClass(t ? 'jstree-clicked' : 'jstree-checked');\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnode.state[ t ? 'selected' : 'checked' ] = false;\n\t\t\t\t\tdom.attr('aria-selected', false).children('.jstree-anchor').removeClass(t ? 'jstree-clicked' : 'jstree-checked');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tselectedChildIds = this.get_checked_descendants(id);\n\n\t\t\t\tif (node.state[ t ? 'selected' : 'checked' ]) {\n\t\t\t\t\tselectedChildIds.push(node.id);\n\t\t\t\t}\n\n\t\t\t\tselectedNodeIds = selectedNodeIds.concat(selectedChildIds);\n\t\t\t}\n\n\t\t\treturn selectedNodeIds;\n\t\t};\n\n\t\t/**\n\t\t * Gets ids of nodes selected in branch (of tree) specified by id (does not include the node specified by id)\n\t\t * @name get_checked_descendants(obj)\n\t\t * @param {string} id the node ID\n\t\t * @return {Array} array of IDs\n\t\t * @plugin checkbox\n\t\t */\n\t\tthis.get_checked_descendants = function (id) {\n\t\t\tvar self = this;\n\t\t\tvar t = self.settings.checkbox.tie_selection;\n\t\t\tvar node = self._model.data[id];\n\n\t\t\treturn node.children_d.filter(function(_id) {\n\t\t\t\treturn self._model.data[_id].state[ t ? 'selected' : 'checked' ];\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * check a node (only if tie_selection in checkbox settings is false, otherwise select_node will be called internally)\n\t\t * @name check_node(obj)\n\t\t * @param {mixed} obj an array can be used to check multiple nodes\n\t\t * @trigger check_node.jstree\n\t\t * @plugin checkbox\n\t\t */\n\t\tthis.check_node = function (obj, e) {\n\t\t\tif(this.settings.checkbox.tie_selection) { return this.select_node(obj, false, true, e); }\n\t\t\tvar dom, t1, t2, th;\n\t\t\tif($.isArray(obj)) {\n\t\t\t\tobj = obj.slice();\n\t\t\t\tfor(t1 = 0, t2 = obj.length; t1 < t2; t1++) {\n\t\t\t\t\tthis.check_node(obj[t1], e);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tobj = this.get_node(obj);\n\t\t\tif(!obj || obj.id === $.jstree.root) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tdom = this.get_node(obj, true);\n\t\t\tif(!obj.state.checked) {\n\t\t\t\tobj.state.checked = true;\n\t\t\t\tthis._data.checkbox.selected.push(obj.id);\n\t\t\t\tif(dom && dom.length) {\n\t\t\t\t\tdom.children('.jstree-anchor').addClass('jstree-checked');\n\t\t\t\t}\n\t\t\t\t/**\n\t\t\t\t * triggered when an node is checked (only if tie_selection in checkbox settings is false)\n\t\t\t\t * @event\n\t\t\t\t * @name check_node.jstree\n\t\t\t\t * @param {Object} node\n\t\t\t\t * @param {Array} selected the current selection\n\t\t\t\t * @param {Object} event the event (if any) that triggered this check_node\n\t\t\t\t * @plugin checkbox\n\t\t\t\t */\n\t\t\t\tthis.trigger('check_node', { 'node' : obj, 'selected' : this._data.checkbox.selected, 'event' : e });\n\t\t\t}\n\t\t};\n\t\t/**\n\t\t * uncheck a node (only if tie_selection in checkbox settings is false, otherwise deselect_node will be called internally)\n\t\t * @name uncheck_node(obj)\n\t\t * @param {mixed} obj an array can be used to uncheck multiple nodes\n\t\t * @trigger uncheck_node.jstree\n\t\t * @plugin checkbox\n\t\t */\n\t\tthis.uncheck_node = function (obj, e) {\n\t\t\tif(this.settings.checkbox.tie_selection) { return this.deselect_node(obj, false, e); }\n\t\t\tvar t1, t2, dom;\n\t\t\tif($.isArray(obj)) {\n\t\t\t\tobj = obj.slice();\n\t\t\t\tfor(t1 = 0, t2 = obj.length; t1 < t2; t1++) {\n\t\t\t\t\tthis.uncheck_node(obj[t1], e);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tobj = this.get_node(obj);\n\t\t\tif(!obj || obj.id === $.jstree.root) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tdom = this.get_node(obj, true);\n\t\t\tif(obj.state.checked) {\n\t\t\t\tobj.state.checked = false;\n\t\t\t\tthis._data.checkbox.selected = $.vakata.array_remove_item(this._data.checkbox.selected, obj.id);\n\t\t\t\tif(dom.length) {\n\t\t\t\t\tdom.children('.jstree-anchor').removeClass('jstree-checked');\n\t\t\t\t}\n\t\t\t\t/**\n\t\t\t\t * triggered when an node is unchecked (only if tie_selection in checkbox settings is false)\n\t\t\t\t * @event\n\t\t\t\t * @name uncheck_node.jstree\n\t\t\t\t * @param {Object} node\n\t\t\t\t * @param {Array} selected the current selection\n\t\t\t\t * @param {Object} event the event (if any) that triggered this uncheck_node\n\t\t\t\t * @plugin checkbox\n\t\t\t\t */\n\t\t\t\tthis.trigger('uncheck_node', { 'node' : obj, 'selected' : this._data.checkbox.selected, 'event' : e });\n\t\t\t}\n\t\t};\n\t\t\n\t\t/**\n\t\t * checks all nodes in the tree (only if tie_selection in checkbox settings is false, otherwise select_all will be called internally)\n\t\t * @name check_all()\n\t\t * @trigger check_all.jstree, changed.jstree\n\t\t * @plugin checkbox\n\t\t */\n\t\tthis.check_all = function () {\n\t\t\tif(this.settings.checkbox.tie_selection) { return this.select_all(); }\n\t\t\tvar tmp = this._data.checkbox.selected.concat([]), i, j;\n\t\t\tthis._data.checkbox.selected = this._model.data[$.jstree.root].children_d.concat();\n\t\t\tfor(i = 0, j = this._data.checkbox.selected.length; i < j; i++) {\n\t\t\t\tif(this._model.data[this._data.checkbox.selected[i]]) {\n\t\t\t\t\tthis._model.data[this._data.checkbox.selected[i]].state.checked = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.redraw(true);\n\t\t\t/**\n\t\t\t * triggered when all nodes are checked (only if tie_selection in checkbox settings is false)\n\t\t\t * @event\n\t\t\t * @name check_all.jstree\n\t\t\t * @param {Array} selected the current selection\n\t\t\t * @plugin checkbox\n\t\t\t */\n\t\t\tthis.trigger('check_all', { 'selected' : this._data.checkbox.selected });\n\t\t};\n\t\t/**\n\t\t * uncheck all checked nodes (only if tie_selection in checkbox settings is false, otherwise deselect_all will be called internally)\n\t\t * @name uncheck_all()\n\t\t * @trigger uncheck_all.jstree\n\t\t * @plugin checkbox\n\t\t */\n\t\tthis.uncheck_all = function () {\n\t\t\tif(this.settings.checkbox.tie_selection) { return this.deselect_all(); }\n\t\t\tvar tmp = this._data.checkbox.selected.concat([]), i, j;\n\t\t\tfor(i = 0, j = this._data.checkbox.selected.length; i < j; i++) {\n\t\t\t\tif(this._model.data[this._data.checkbox.selected[i]]) {\n\t\t\t\t\tthis._model.data[this._data.checkbox.selected[i]].state.checked = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._data.checkbox.selected = [];\n\t\t\tthis.element.find('.jstree-checked').removeClass('jstree-checked');\n\t\t\t/**\n\t\t\t * triggered when all nodes are unchecked (only if tie_selection in checkbox settings is false)\n\t\t\t * @event\n\t\t\t * @name uncheck_all.jstree\n\t\t\t * @param {Object} node the previous selection\n\t\t\t * @param {Array} selected the current selection\n\t\t\t * @plugin checkbox\n\t\t\t */\n\t\t\tthis.trigger('uncheck_all', { 'selected' : this._data.checkbox.selected, 'node' : tmp });\n\t\t};\n\t\t/**\n\t\t * checks if a node is checked (if tie_selection is on in the settings this function will return the same as is_selected)\n\t\t * @name is_checked(obj)\n\t\t * @param  {mixed}  obj\n\t\t * @return {Boolean}\n\t\t * @plugin checkbox\n\t\t */\n\t\tthis.is_checked = function (obj) {\n\t\t\tif(this.settings.checkbox.tie_selection) { return this.is_selected(obj); }\n\t\t\tobj = this.get_node(obj);\n\t\t\tif(!obj || obj.id === $.jstree.root) { return false; }\n\t\t\treturn obj.state.checked;\n\t\t};\n\t\t/**\n\t\t * get an array of all checked nodes (if tie_selection is on in the settings this function will return the same as get_selected)\n\t\t * @name get_checked([full])\n\t\t * @param  {mixed}  full if set to `true` the returned array will consist of the full node objects, otherwise - only IDs will be returned\n\t\t * @return {Array}\n\t\t * @plugin checkbox\n\t\t */\n\t\tthis.get_checked = function (full) {\n\t\t\tif(this.settings.checkbox.tie_selection) { return this.get_selected(full); }\n\t\t\treturn full ? $.map(this._data.checkbox.selected, $.proxy(function (i) { return this.get_node(i); }, this)) : this._data.checkbox.selected;\n\t\t};\n\t\t/**\n\t\t * get an array of all top level checked nodes (ignoring children of checked nodes) (if tie_selection is on in the settings this function will return the same as get_top_selected)\n\t\t * @name get_top_checked([full])\n\t\t * @param  {mixed}  full if set to `true` the returned array will consist of the full node objects, otherwise - only IDs will be returned\n\t\t * @return {Array}\n\t\t * @plugin checkbox\n\t\t */\n\t\tthis.get_top_checked = function (full) {\n\t\t\tif(this.settings.checkbox.tie_selection) { return this.get_top_selected(full); }\n\t\t\tvar tmp = this.get_checked(true),\n\t\t\t\tobj = {}, i, j, k, l;\n\t\t\tfor(i = 0, j = tmp.length; i < j; i++) {\n\t\t\t\tobj[tmp[i].id] = tmp[i];\n\t\t\t}\n\t\t\tfor(i = 0, j = tmp.length; i < j; i++) {\n\t\t\t\tfor(k = 0, l = tmp[i].children_d.length; k < l; k++) {\n\t\t\t\t\tif(obj[tmp[i].children_d[k]]) {\n\t\t\t\t\t\tdelete obj[tmp[i].children_d[k]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\ttmp = [];\n\t\t\tfor(i in obj) {\n\t\t\t\tif(obj.hasOwnProperty(i)) {\n\t\t\t\t\ttmp.push(i);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn full ? $.map(tmp, $.proxy(function (i) { return this.get_node(i); }, this)) : tmp;\n\t\t};\n\t\t/**\n\t\t * get an array of all bottom level checked nodes (ignoring selected parents) (if tie_selection is on in the settings this function will return the same as get_bottom_selected)\n\t\t * @name get_bottom_checked([full])\n\t\t * @param  {mixed}  full if set to `true` the returned array will consist of the full node objects, otherwise - only IDs will be returned\n\t\t * @return {Array}\n\t\t * @plugin checkbox\n\t\t */\n\t\tthis.get_bottom_checked = function (full) {\n\t\t\tif(this.settings.checkbox.tie_selection) { return this.get_bottom_selected(full); }\n\t\t\tvar tmp = this.get_checked(true),\n\t\t\t\tobj = [], i, j;\n\t\t\tfor(i = 0, j = tmp.length; i < j; i++) {\n\t\t\t\tif(!tmp[i].children.length) {\n\t\t\t\t\tobj.push(tmp[i].id);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn full ? $.map(obj, $.proxy(function (i) { return this.get_node(i); }, this)) : obj;\n\t\t};\n\t\tthis.load_node = function (obj, callback) {\n\t\t\tvar k, l, i, j, c, tmp;\n\t\t\tif(!$.isArray(obj) && !this.settings.checkbox.tie_selection) {\n\t\t\t\ttmp = this.get_node(obj);\n\t\t\t\tif(tmp && tmp.state.loaded) {\n\t\t\t\t\tfor(k = 0, l = tmp.children_d.length; k < l; k++) {\n\t\t\t\t\t\tif(this._model.data[tmp.children_d[k]].state.checked) {\n\t\t\t\t\t\t\tc = true;\n\t\t\t\t\t\t\tthis._data.checkbox.selected = $.vakata.array_remove_item(this._data.checkbox.selected, tmp.children_d[k]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn parent.load_node.apply(this, arguments);\n\t\t};\n\t\tthis.get_state = function () {\n\t\t\tvar state = parent.get_state.apply(this, arguments);\n\t\t\tif(this.settings.checkbox.tie_selection) { return state; }\n\t\t\tstate.checkbox = this._data.checkbox.selected.slice();\n\t\t\treturn state;\n\t\t};\n\t\tthis.set_state = function (state, callback) {\n\t\t\tvar res = parent.set_state.apply(this, arguments);\n\t\t\tif(res && state.checkbox) {\n\t\t\t\tif(!this.settings.checkbox.tie_selection) {\n\t\t\t\t\tthis.uncheck_all();\n\t\t\t\t\tvar _this = this;\n\t\t\t\t\t$.each(state.checkbox, function (i, v) {\n\t\t\t\t\t\t_this.check_node(v);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tdelete state.checkbox;\n\t\t\t\tthis.set_state(state, callback);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn res;\n\t\t};\n\t\tthis.refresh = function (skip_loading, forget_state) {\n\t\t\tif(!this.settings.checkbox.tie_selection) {\n\t\t\t\tthis._data.checkbox.selected = [];\n\t\t\t}\n\t\t\treturn parent.refresh.apply(this, arguments);\n\t\t};\n\t};\n\n\t// include the checkbox plugin by default\n\t// $.jstree.defaults.plugins.push(\"checkbox\");\n\n\treturn $;\n});\n"]}