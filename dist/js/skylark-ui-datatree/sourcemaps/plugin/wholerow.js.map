{"version":3,"sources":["plugin/wholerow.js"],"names":["define","langx","browser","eventer","noder","geom","velm","$","jstree","sbswt","plugins","wholerow","div","document","createElement","setAttribute","className","innerHTML","options","parent","this","bind","call","element","on","proxy","hide_dots","get_container_ul","addClass","e","data","find","removeClass","i","j","tmp","selected","length","get_node","children","node","type","is_disabled","_data","contextmenu","preventDefault","Event","metaKey","ctrlKey","altKey","shiftKey","pageX","pageY","currentTarget","closest","first","trigger","stopImmediatePropagation","focus","hover_node","dehover_node","teardown","settings","remove","redraw_node","obj","deep","callback","force_render","apply","arguments","cloneNode","inArray","id","core","focused","insertBefore","childNodes"],"mappings":"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","file":"../../plugin/wholerow.js","sourcesContent":["define([\n  \"skylark-utils/langx\",\n  \"skylark-utils/browser\",\n  \"skylark-utils/eventer\",\n  \"skylark-utils/noder\",\n  \"skylark-utils/geom\",\n  \"skylark-utils/velm\",\n  \"skylark-utils/query\",\n  \"../tree\",\n  \"skylark-ui-swt/sbswt\"\n],function(langx,browser,eventer,noder,geom,velm,$,jstree,sbswt){\n\t\"use strict\";\n\n\tif($.jstree.plugins.wholerow) { return; }\n\n\tvar div = document.createElement('DIV');\n\tdiv.setAttribute('unselectable','on');\n\tdiv.setAttribute('role','presentation');\n\tdiv.className = 'jstree-wholerow';\n\tdiv.innerHTML = '&#160;';\n\t$.jstree.plugins.wholerow = function (options, parent) {\n\t\tthis.bind = function () {\n\t\t\tparent.bind.call(this);\n\n\t\t\tthis.element\n\t\t\t\t.on('ready.jstree set_state.jstree', $.proxy(function () {\n\t\t\t\t\t\tthis.hide_dots();\n\t\t\t\t\t}, this))\n\t\t\t\t.on(\"init.jstree loading.jstree ready.jstree\", $.proxy(function () {\n\t\t\t\t\t\t//div.style.height = this._data.core.li_height + 'px';\n\t\t\t\t\t\tthis.get_container_ul().addClass('jstree-wholerow-ul');\n\t\t\t\t\t}, this))\n\t\t\t\t.on(\"deselect_all.jstree\", $.proxy(function (e, data) {\n\t\t\t\t\t\tthis.element.find('.jstree-wholerow-clicked').removeClass('jstree-wholerow-clicked');\n\t\t\t\t\t}, this))\n\t\t\t\t.on(\"changed.jstree\", $.proxy(function (e, data) {\n\t\t\t\t\t\tthis.element.find('.jstree-wholerow-clicked').removeClass('jstree-wholerow-clicked');\n\t\t\t\t\t\tvar tmp = false, i, j;\n\t\t\t\t\t\tfor(i = 0, j = data.selected.length; i < j; i++) {\n\t\t\t\t\t\t\ttmp = this.get_node(data.selected[i], true);\n\t\t\t\t\t\t\tif(tmp && tmp.length) {\n\t\t\t\t\t\t\t\ttmp.children('.jstree-wholerow').addClass('jstree-wholerow-clicked');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this))\n\t\t\t\t.on(\"open_node.jstree\", $.proxy(function (e, data) {\n\t\t\t\t\t\tthis.get_node(data.node, true).find('.jstree-clicked').parent().children('.jstree-wholerow').addClass('jstree-wholerow-clicked');\n\t\t\t\t\t}, this))\n\t\t\t\t.on(\"hover_node.jstree dehover_node.jstree\", $.proxy(function (e, data) {\n\t\t\t\t\t\tif(e.type === \"hover_node\" && this.is_disabled(data.node)) { return; }\n\t\t\t\t\t\tthis.get_node(data.node, true).children('.jstree-wholerow')[e.type === \"hover_node\"?\"addClass\":\"removeClass\"]('jstree-wholerow-hovered');\n\t\t\t\t\t}, this))\n\t\t\t\t.on(\"contextmenu.jstree\", \".jstree-wholerow\", $.proxy(function (e) {\n\t\t\t\t\t\tif (this._data.contextmenu) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tvar tmp = $.Event('contextmenu', { metaKey : e.metaKey, ctrlKey : e.ctrlKey, altKey : e.altKey, shiftKey : e.shiftKey, pageX : e.pageX, pageY : e.pageY });\n\t\t\t\t\t\t\t$(e.currentTarget).closest(\".jstree-node\").children(\".jstree-anchor\").first().trigger(tmp);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this))\n\t\t\t\t/*!\n\t\t\t\t.on(\"mousedown.jstree touchstart.jstree\", \".jstree-wholerow\", function (e) {\n\t\t\t\t\t\tif(e.target === e.currentTarget) {\n\t\t\t\t\t\t\tvar a = $(e.currentTarget).closest(\".jstree-node\").children(\".jstree-anchor\");\n\t\t\t\t\t\t\te.target = a[0];\n\t\t\t\t\t\t\ta.trigger(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t*/\n\t\t\t\t.on(\"click.jstree\", \".jstree-wholerow\", function (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\tvar tmp = $.Event('click', { metaKey : e.metaKey, ctrlKey : e.ctrlKey, altKey : e.altKey, shiftKey : e.shiftKey });\n\t\t\t\t\t\t$(e.currentTarget).closest(\".jstree-node\").children(\".jstree-anchor\").first().trigger(tmp).focus();\n\t\t\t\t\t})\n\t\t\t\t.on(\"dblclick.jstree\", \".jstree-wholerow\", function (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\tvar tmp = $.Event('dblclick', { metaKey : e.metaKey, ctrlKey : e.ctrlKey, altKey : e.altKey, shiftKey : e.shiftKey });\n\t\t\t\t\t\t$(e.currentTarget).closest(\".jstree-node\").children(\".jstree-anchor\").first().trigger(tmp).focus();\n\t\t\t\t\t})\n\t\t\t\t.on(\"click.jstree\", \".jstree-leaf > .jstree-ocl\", $.proxy(function (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\tvar tmp = $.Event('click', { metaKey : e.metaKey, ctrlKey : e.ctrlKey, altKey : e.altKey, shiftKey : e.shiftKey });\n\t\t\t\t\t\t$(e.currentTarget).closest(\".jstree-node\").children(\".jstree-anchor\").first().trigger(tmp).focus();\n\t\t\t\t\t}, this))\n\t\t\t\t.on(\"mouseover.jstree\", \".jstree-wholerow, .jstree-icon\", $.proxy(function (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\tif(!this.is_disabled(e.currentTarget)) {\n\t\t\t\t\t\t\tthis.hover_node(e.currentTarget);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}, this))\n\t\t\t\t.on(\"mouseleave.jstree\", \".jstree-node\", $.proxy(function (e) {\n\t\t\t\t\t\tthis.dehover_node(e.currentTarget);\n\t\t\t\t\t}, this));\n\t\t};\n\t\tthis.teardown = function () {\n\t\t\tif(this.settings.wholerow) {\n\t\t\t\tthis.element.find(\".jstree-wholerow\").remove();\n\t\t\t}\n\t\t\tparent.teardown.call(this);\n\t\t};\n\t\tthis.redraw_node = function(obj, deep, callback, force_render) {\n\t\t\tobj = parent.redraw_node.apply(this, arguments);\n\t\t\tif(obj) {\n\t\t\t\tvar tmp = div.cloneNode(true);\n\t\t\t\t//tmp.style.height = this._data.core.li_height + 'px';\n\t\t\t\tif($.inArray(obj.id, this._data.core.selected) !== -1) { tmp.className += ' jstree-wholerow-clicked'; }\n\t\t\t\tif(this._data.core.focused && this._data.core.focused === obj.id) { tmp.className += ' jstree-wholerow-hovered'; }\n\t\t\t\tobj.insertBefore(tmp, obj.childNodes[0]);\n\t\t\t}\n\t\t\treturn obj;\n\t\t};\n\t};\n\t// include the wholerow plugin by default\n\t// $.jstree.defaults.plugins.push(\"wholerow\");\n\n\treturn $;\n\n});\n"]}